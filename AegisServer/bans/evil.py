aW1wb3J0IHJhbmRvbSwgdGltZQoKZGVmIGNodW5rcyhsLCBuKTogCiAgICBmb3IgaSBpbiByYW5n
ZSgwLCBsZW4obCksIG4pOgogICAgICAgIHlpZWxkIGxbaTppK25dCiAgICAgICAgCmRlZiBnZXRO
YW1lc0NoYW5uZWwoY2hhbm5lbCxpcmMpOgogICAgaXJjLnNlbmQoIk5BTUVTIHswfVxyXG4iLmZv
cm1hdChjaGFubmVsKS5lbmNvZGUoIlVURi04IikpCiAgICBpcmNtc2cgPSBpcmMucmVjdigyMDQ4
KQogICAgaXJjbXNnID0gaXJjbXNnLmRlY29kZSgiVVRGLTgiKQogICAgaXJjbXNnID0gaXJjbXNn
LnN0cmlwKCJcclxuIikKICAgIGlyY21zZyA9IGlyY21zZy5zdHJpcCgiOiIpLnNwbGl0KCIgOiIs
MSlbMV0uc3BsaXQoIiAiKQogICAgCiAgICByZXR1cm5lZCA9IFtdCiAgICBmb3IgaSBpbiBpcmNt
c2c6CiAgICAgICAgaWYgaS5zdGFydHN3aXRoKCJAIik6CiAgICAgICAgICAgIHJldHVybmVkLmFw
cGVuZChbaS5yZXBsYWNlKCJAIiwiIiwxKSwgIm9wIiBdKQogICAgICAgIGVsaWYgaS5zdGFydHN3
aXRoKCIrIik6CiAgICAgICAgICAgIHJldHVybmVkLmFwcGVuZChbaS5yZXBsYWNlKCIrIiwiIiwx
KSwgInZvaWNlIiBdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybmVkLmFwcGVuZChb
aSwibm9uZSJdKQogICAgcmV0dXJuIHJldHVybmVkCgogICAgI3dlYmVyLmZyZWVub2RlLm5ldCAz
NTMgQWVnaXNTZXJ2ZXIgQCAjI0JXQmVsbGFpcnMtYm90cyA6CiAgICAjQEFlZ2lzU2VydmVyIF53
b2xmeSBAQm93c2VyaW5hdG9yIG5vdGVuZXNzIEpaVGVjaDEwMSB6eiBKZURhIEBCV0JlbGxhaXJz
IFJhZGlvTmVhdCBib3htZWluIEBIQUw5MDAwIEBBbmRyb21lZGEgQERaQm90IEN1c3NCb3QgQGlv
dm9pZCBAQldCZWxsYWlyc1tCb3RdIEBJbmRpZ29UaWdlcgogICAgI1JldHVybnMgbGlzdCBvZiBu
YW1lcyBpbiBhbiBhcnJheSBbWyJuYW1lIiwib3AiXV0KCmRlZiBvcEFsbChhcmdzPSIiLHVzZXI9
Tm9uZSxob3N0bWFzaz1Ob25lLGV4dHJhPXt9KToKICAgIHVzZXJzID0gZ2V0TmFtZXNDaGFubmVs
KGV4dHJhWyJjaGFubmVsIl0sZXh0cmFbImlyY3NvY2siXS5pcmNzb2NrKQogICAgZm9yIHggaW4g
cmFuZ2UoMCxsZW4odXNlcnMpKzEsNCk6CiAgICAgICAgdHJ5OiBleHRyYVsiaXJjc29jayJdLnNl
dE1vZGUoZXh0cmFbImNoYW5uZWwiXSwgIiAiLmpvaW4oW3VzZXJzW3hdWzBdLHVzZXJzW3grMV1b
MF0sdXNlcnNbeCsyXVswXSx1c2Vyc1t4KzNdWzBdXSkgLCAiK29vb28iKQogICAgICAgIGV4Y2Vw
dDogCiAgICAgICAgICAgIHRyeTogZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFu
bmVsIl0sICIgIi5qb2luKFt1c2Vyc1t4XVswXSx1c2Vyc1t4KzFdWzBdLHVzZXJzW3grMl1bMF1d
KSAsICIrb29vbyIpCiAgICAgICAgICAgIGV4Y2VwdDogCiAgICAgICAgICAgICAgICB0cnk6IGV4
dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShleHRyYVsiY2hhbm5lbCJdLCAiICIuam9pbihbdXNlcnNb
eF1bMF0sdXNlcnNbeCsxXVswXV0pICwgIitvb29vIikKICAgICAgICAgICAgICAgIGV4Y2VwdDog
ZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFubmVsIl0sICIgIi5qb2luKFt1c2Vy
c1t4XVswXV0pICwgIitvb29vIikKCmRlZiBkZW9wQWxsKGFyZ3M9IiIsdXNlcj1Ob25lLGhvc3Rt
YXNrPU5vbmUsZXh0cmE9e30pOgogICAgdXNlcnMgPSBnZXROYW1lc0NoYW5uZWwoZXh0cmFbImNo
YW5uZWwiXSxleHRyYVsiaXJjc29jayJdLmlyY3NvY2spCiAgICBmb3IgeCBpbiByYW5nZSgwLGxl
bih1c2VycykrMSw0KToKICAgICAgICB0cnk6IGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShleHRy
YVsiY2hhbm5lbCJdLCAiICIuam9pbihbdXNlcnNbeF1bMF0sdXNlcnNbeCsxXVswXSx1c2Vyc1t4
KzJdWzBdLHVzZXJzW3grM11bMF1dKS5yZXBsYWNlKGV4dHJhWyJjb25maWciXS5uaWNrLCIiKS5y
ZXBsYWNlKCJCb3dzZXJpbmF0b3IiLCIiKS5yZXBsYWNlKCJBZWdpc1NlcnZlciIsIiIpLnJlcGxh
Y2UoIiAgIiwiICIpICwgIi1vb29vIikKICAgICAgICBleGNlcHQ6IAogICAgICAgICAgICB0cnk6
IGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShleHRyYVsiY2hhbm5lbCJdLCAiICIuam9pbihbdXNl
cnNbeF1bMF0sdXNlcnNbeCsxXVswXSx1c2Vyc1t4KzJdWzBdXSkucmVwbGFjZShleHRyYVsiY29u
ZmlnIl0ubmljaywiIikucmVwbGFjZSgiQm93c2VyaW5hdG9yIiwiIikucmVwbGFjZSgiQWVnaXNT
ZXJ2ZXIiLCIiKS5yZXBsYWNlKCIgICIsIiAiKSAsICItb29vbyIpCiAgICAgICAgICAgIGV4Y2Vw
dDogCiAgICAgICAgICAgICAgICB0cnk6IGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShleHRyYVsi
Y2hhbm5lbCJdLCAiICIuam9pbihbdXNlcnNbeF1bMF0sdXNlcnNbeCsxXVswXV0pLnJlcGxhY2Uo
ZXh0cmFbImNvbmZpZyJdLm5pY2ssIiIpLnJlcGxhY2UoIkJvd3NlcmluYXRvciIsIiIpLnJlcGxh
Y2UoIkFlZ2lzU2VydmVyIiwiIikucmVwbGFjZSgiICAiLCIgIikgLCAiLW9vb28iKQogICAgICAg
ICAgICAgICAgZXhjZXB0OiBleHRyYVsiaXJjc29jayJdLnNldE1vZGUoZXh0cmFbImNoYW5uZWwi
XSwgIiAiLmpvaW4oW3VzZXJzW3hdWzBdXSkucmVwbGFjZShleHRyYVsiY29uZmlnIl0ubmljaywi
IikucmVwbGFjZSgiQm93c2VyaW5hdG9yIiwiIikucmVwbGFjZSgiQWVnaXNTZXJ2ZXIiLCIiKS5y
ZXBsYWNlKCIgICIsIiAiKSAsICItb29vbyIpCgpkZWYga2lja0FsbChhcmdzPSIiLHVzZXI9Tm9u
ZSxob3N0bWFzaz1Ob25lLGV4dHJhPXt9KToKICAgIHVzZXJzID0gZ2V0TmFtZXNDaGFubmVsKGV4
dHJhWyJjaGFubmVsIl0sZXh0cmFbImlyY3NvY2siXS5pcmNzb2NrKQogICAgZm9yIGkgaW4gdXNl
cnM6CiAgICAgICAgaWYgaVswXSAhPSAiQm93c2VyaW5hdG9yIiBhbmQgaVswXSAhPSAiQWVnaXNT
ZXJ2ZXIiIGFuZCBpWzBdICE9IGV4dHJhWyJjb25maWciXS5uaWNrOgogICAgICAgICAgICBleHRy
YVsiaXJjc29jayJdLmtpY2t1c2VyKGV4dHJhWyJjaGFubmVsIl0saVswXSwiWW91IGFyZSBiZWlu
ZyBraWNrZWQgYXMgcGFydCBvZiBvdXIga2lja2FsbCBjb21tYW5kLiIpCiAgICAgICAgICAgIHRp
bWUuc2xlZXAoMSkKICAgICAgICAgICAgCmRlZiBtYXNzaGlnaGxpZ2h0KGFyZ3M9IiIsdXNlcj1O
b25lLGhvc3RtYXNrPU5vbmUsZXh0cmE9e30pOgogICAgdXNlcnMgPSBnZXROYW1lc0NoYW5uZWwo
ZXh0cmFbImNoYW5uZWwiXSxleHRyYVsiaXJjc29jayJdLmlyY3NvY2spCiAgICByZXR1cm5lZCA9
ICIiCiAgICBmb3IgaSBpbiB1c2VyczoKICAgICAgICByZXR1cm5lZCA9IHJldHVybmVkICsgaVsw
XSArICIgIgogICAgZXh0cmFbImlyY3NvY2siXS5zZW5kbXNnKGV4dHJhWyJjaGFubmVsIl0scmV0
dXJuZWQpCgpkZWYgdGFrZU92ZXIoYXJncz0iIix1c2VyPU5vbmUsaG9zdG1hc2s9Tm9uZSxleHRy
YT17fSk6CiAgICB1c2VycyA9IGdldE5hbWVzQ2hhbm5lbChleHRyYVsiY2hhbm5lbCJdLGV4dHJh
WyJpcmNzb2NrIl0uaXJjc29jaykKICAgIGNoYW5uZWwgPSBleHRyYVsiY2hhbm5lbCJdCiAgICBl
eHRyYVsiaXJjc29jayJdLmpvaW5jaGFuKGNoYW5uZWwpCiAgICBleHRyYVsiaXJjc29jayJdLnNl
bmRtc2coIkNoYW5TZXJ2Iiwib3AgezB9Ii5mb3JtYXQoY2hhbm5lbCkpCiAgICAKICAgIGV4dHJh
WyJpcmNzb2NrIl0uc2V0TW9kZShjaGFubmVsLCJ1bmFmZmlsaWF0ZWQvYm93c2VyaW5hdG9yIiwi
K2UiKQogICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsIjIzNC4xMTIuMTk3LjEw
NC5iYy5nb29nbGV1c2VyY29udGVudC5jb20iLCIrZSIpCiAgICBleHRyYVsiaXJjc29jayJdLnNl
dE1vZGUoY2hhbm5lbCxleHRyYVsiY29uZmlnIl0uaXAsIitlIikKICAgIGV4dHJhWyJpcmNzb2Nr
Il0uam9pbmNoYW4oY2hhbm5lbCkKICAgIGV4dHJhWyJpcmNzb2NrIl0uc2VuZG1zZygiQ2hhblNl
cnYiLCJvcCB7MH0iLmZvcm1hdChjaGFubmVsKSkKICAgCiAgICAjVE9ETyBTRUxGIE9QIFdISUxF
IFRBS0VPVkVSCiAgICAjSk9JTiBPTiBLSUNLIE9OIFRBS0VPVkVSCiAgICBmb3IgaSBpbiB1c2Vy
czoKICAgICAgICAjZXh0cmFbImlyY3NvY2siXS5iYW4oY2hhbm5lbCwiKiIpCiAgICAgICAgaWYg
aVswXSAhPSAiQm93c2VyaW5hdG9yIiBhbmQgaVswXSAhPSAiQWVnaXNTZXJ2ZXIiIGFuZCBpWzBd
ICE9IGV4dHJhWyJjb25maWciXS5uaWNrOiAKICAgICAgICAgICAgZXh0cmFbImlyY3NvY2siXS5i
YW4oY2hhbm5lbCxpWzBdKQogICAgICAgICAgICBleHRyYVsiaXJjc29jayJdLmtpY2t1c2VyKGNo
YW5uZWwsaVswXSwiVGFrZW92ZXIgaW4gcHJvZ3Jlc3MsIHBsZWFzZSByZW1haW4gY2FsbSIpCiAg
ICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBpcmNtc2cgPSBleHRyYVsiaXJjc29jayJd
LmlyY3NvY2sucmVjdigyMDQ4KS5kZWNvZGUoJ3V0Zi04JywgJ2lnbm9yZScpICAjIHJlY2VpdmUg
ZGF0YSBmcm9tIHRoZSBzZXJ2ZXIKICAgICAgICBpcmNtc2cgPSBpcmNtc2cuc3RyaXAoJ1xuXHIn
KSAKICAgICAgICBpZiAiIEtJQ0sgIiBpbiBpcmNtc2cgYW5kIGV4dHJhWyJjb25maWciXS5uaWNr
Lmxvd2VyKCkgaW4gaXJjbXNnOgogICAgICAgICAgICBleHRyYVsiaXJjc29jayJdLmpvaW5jaGFu
KGNoYW5uZWwpCiAgICAgICAgICAgIGV4dHJhWyJpcmNzb2NrIl0uc2VuZG1zZygiQ2hhblNlcnYi
LCJvcCB7MH0iLmZvcm1hdChjaGFubmVsKSkKICAgICAgICBlbGlmICIgTU9ERSAiIGluIGlyY21z
ZyBhbmQgIi1vIiBpbiBpcmNtc2c6CiAgICAgICAgICAgIGV4dHJhWyJpcmNzb2NrIl0uc2VuZG1z
ZygiQ2hhblNlcnYiLCJvcCB7MH0iLmZvcm1hdChjaGFubmVsKSkKICAgICAgICAgICAgCiAgICBl
eHRyYVsiaXJjc29jayJdLmJhbihjaGFubmVsLCIqISpAKiQjI2Jvd3NlcmluYXRvciIpCiAgICBm
b3IgaSBpbiB1c2VyczoKICAgICAgICBpZiBpWzBdICE9ICJCb3dzZXJpbmF0b3IiIGFuZCBpWzBd
ICE9ICJBZWdpc1NlcnZlciIgYW5kIGlbMF0gIT0gZXh0cmFbImNvbmZpZyJdLm5pY2s6IAogICAg
ICAgICAgICBleHRyYVsiaXJjc29jayJdLmJhbihjaGFubmVsLGlbMF0pCiAgICAgICAgICAgIAog
ICAgICAgIAogICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsIiIsIitpIikKICAg
IGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShjaGFubmVsLCIiLCIrTSIpCiAgICBleHRyYVsiaXJj
c29jayJdLnNldE1vZGUoY2hhbm5lbCwiIiwiK1MiKQogICAgCiAgICBleHRyYVsiaXJjc29jayJd
LnNldE1vZGUoY2hhbm5lbCwgc3RyKHJhbmRvbS5yYW5kaW50KDAsMTAwMDAwKSkgLCIrayIpCiAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIApkZWYgdW50YWtlT3ZlcihhcmdzPSIiLHVz
ZXI9Tm9uZSxob3N0bWFzaz1Ob25lLGV4dHJhPXt9KToKICAgIGNoYW5uZWwgPSBleHRyYVsiY2hh
bm5lbCJdCiAgICBleHRyYVsiaXJjc29jayJdLnVuYmFuKGNoYW5uZWwsIioiKQogICAgICAgIAog
ICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsIiIsIi1pIikKICAgIGV4dHJhWyJp
cmNzb2NrIl0uc2V0TW9kZShjaGFubmVsLCIiLCItTSIpCiAgICBleHRyYVsiaXJjc29jayJdLnNl
dE1vZGUoY2hhbm5lbCwiIiwiLVMiKQogICAgCiAgICBleHRyYVsiaXJjc29jayJdLnNldE1vZGUo
Y2hhbm5lbCwgIioiICwiLWsiKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKZGVm
IHNwYW0oYXJncz0iIix1c2VyPU5vbmUsaG9zdG1hc2s9Tm9uZSxleHRyYT17fSk6CiAgICAjQHNw
YW0gPGFtb3VudD4gPGRlbGF5PiA8bWVzc2FnZT4KICAgIGFtb3VudCA9IGFyZ3Muc3BsaXQoIiAi
KVswXQogICAgZGVsYXkgPSBhcmdzLnNwbGl0KCIgIilbMV0KICAgIHRyeTogbWVzc2FnZSA9IGFy
Z3Muc3BsaXQoYW1vdW50KyAiICIgKyBkZWxheSsiICIpWzFdCiAgICBleGNlcHQ6IG1lc3NhZ2Ug
PSAiU1BBTSIKICAgIAogICAgdHJ5OiAKICAgICAgICBmb3IgaSBpbiByYW5nZSgwLGludChmbG9h
dChhbW91bnQpKSk6CiAgICAgICAgICAgIHRpbWUuc2xlZXAoZmxvYXQoZGVsYXkpKQogICAgICAg
ICAgICBleHRyYVsiaXJjc29jayJdLnNlbmRtc2coZXh0cmFbImNoYW5uZWwiXSxtZXNzYWdlKQog
ICAgICAgIHJldHVybiAiRG9uZSBzcGFtbWluZyBmb3IgdGhlIGRheS4iCiAgICBleGNlcHQ6CiAg
ICAgICAgcmV0dXJuICJJbnZhbGlkIGFyZ3VtZW50cywgdXNlIHNwYW0gPGFtb3VudD4gPGRlbGF5
PiA8bWVzc2FnZT4i
