data = """aW1wb3J0IHJhbmRvbSwgdGltZQ0KDQpkZWYgY2h1bmtzKGwsIG4pOiANCiAgICBmb3IgaSBpbiByYW5nZSgwLCBsZW4obCksIG4pOg0KICAgICAgICB5aWVsZCBsW2k6aStuXQ0KICAgICAgICANCmRlZiBnZXROYW1lc0NoYW5uZWwoY2hhbm5lbCxpcmMpOg0KICAgIGlyYy5zZW5kKCJOQU1FUyB7MH0iLmZvcm1hdChjaGFubmVsKS5lbmNvZGUoIlVURi04IikpDQogICAgaXJjbXNnID0gaXJjLnJlY3YoMjA0OCkNCiAgICBpcmNtc2cgPSBpcmNtc2cuZGVjb2RlKCJVVEYtOCIpDQogICAgaXJjbXNnID0gaXJjbXNnLnN0cmlwKCIiKQ0KICAgIGlyY21zZyA9IGlyY21zZy5zdHJpcCgiOiIpLnNwbGl0KCIgOiIsMSlbMV0uc3BsaXQoIiAiKQ0KICAgIHJldHVybmVkID0gW10NCiAgICBmb3IgaSBpbiBpcmNtc2c6DQogICAgICAgIGlmIGkuc3RhcnRzd2l0aCgiQCIpOg0KICAgICAgICAgICAgcmV0dXJuZWQuYXBwZW5kKFtpLnJlcGxhY2UoIkAiLCIiLDEpLCAib3AiIF0pDQogICAgICAgIGVsaWYgaS5zdGFydHN3aXRoKCIrIik6DQogICAgICAgICAgICByZXR1cm5lZC5hcHBlbmQoW2kucmVwbGFjZSgiKyIsIiIsMSksICJ2b2ljZSIgXSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybmVkLmFwcGVuZChbaSwibm9uZSJdKQ0KICAgIHJldHVybiByZXR1cm5lZCAjUmV0dXJucyBsaXN0IG9mIG5hbWVzIGluIGFuIGFycmF5IFtbIm5hbWUiLCJvcCJdXQ0KDQpkZWYgb3BBbGwoYXJncz0iIix1c2VyPU5vbmUsaG9zdG1hc2s9Tm9uZSxleHRyYT17fSk6DQogICAgdXNlcnMgPSBnZXROYW1lc0NoYW5uZWwoZXh0cmFbImNoYW5uZWwiXSxleHRyYVsiaXJjc29jayJdLmlyY3NvY2spDQogICAgZm9yIHggaW4gcmFuZ2UoMCxsZW4odXNlcnMpKzEsNCk6DQogICAgICAgIHRyeTogZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFubmVsIl0sICIgIi5qb2luKFt1c2Vyc1t4XVswXSx1c2Vyc1t4KzFdWzBdLHVzZXJzW3grMl1bMF0sdXNlcnNbeCszXVswXV0pICwgIitvb29vIikNCiAgICAgICAgZXhjZXB0OiANCiAgICAgICAgICAgIHRyeTogZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFubmVsIl0sICIgIi5qb2luKFt1c2Vyc1t4XVswXSx1c2Vyc1t4KzFdWzBdLHVzZXJzW3grMl1bMF1dKSAsICIrb29vbyIpDQogICAgICAgICAgICBleGNlcHQ6IA0KICAgICAgICAgICAgICAgIHRyeTogZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFubmVsIl0sICIgIi5qb2luKFt1c2Vyc1t4XVswXSx1c2Vyc1t4KzFdWzBdXSkgLCAiK29vb28iKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdDogZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFubmVsIl0sICIgIi5qb2luKFt1c2Vyc1t4XVswXV0pICwgIitvb29vIikNCg0KZGVmIGRlb3BBbGwoYXJncz0iIix1c2VyPU5vbmUsaG9zdG1hc2s9Tm9uZSxleHRyYT17fSk6DQogICAgdXNlcnMgPSBnZXROYW1lc0NoYW5uZWwoZXh0cmFbImNoYW5uZWwiXSxleHRyYVsiaXJjc29jayJdLmlyY3NvY2spDQogICAgZm9yIHggaW4gcmFuZ2UoMCxsZW4odXNlcnMpKzEsNCk6DQogICAgICAgIHRyeTogZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFubmVsIl0sICIgIi5qb2luKFt1c2Vyc1t4XVswXSx1c2Vyc1t4KzFdWzBdLHVzZXJzW3grMl1bMF0sdXNlcnNbeCszXVswXV0pLnJlcGxhY2UoZXh0cmFbImNvbmZpZyJdLm5pY2ssIiIpLnJlcGxhY2UoIkJvd3NlcmluYXRvciIsIiIpLnJlcGxhY2UoIkFlZ2lzU2VydmVyIiwiIikucmVwbGFjZSgiICAiLCIgIikgLCAiLW9vb28iKQ0KICAgICAgICBleGNlcHQ6IA0KICAgICAgICAgICAgdHJ5OiBleHRyYVsiaXJjc29jayJdLnNldE1vZGUoZXh0cmFbImNoYW5uZWwiXSwgIiAiLmpvaW4oW3VzZXJzW3hdWzBdLHVzZXJzW3grMV1bMF0sdXNlcnNbeCsyXVswXV0pLnJlcGxhY2UoZXh0cmFbImNvbmZpZyJdLm5pY2ssIiIpLnJlcGxhY2UoIkJvd3NlcmluYXRvciIsIiIpLnJlcGxhY2UoIkFlZ2lzU2VydmVyIiwiIikucmVwbGFjZSgiICAiLCIgIikgLCAiLW9vb28iKQ0KICAgICAgICAgICAgZXhjZXB0OiANCiAgICAgICAgICAgICAgICB0cnk6IGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShleHRyYVsiY2hhbm5lbCJdLCAiICIuam9pbihbdXNlcnNbeF1bMF0sdXNlcnNbeCsxXVswXV0pLnJlcGxhY2UoZXh0cmFbImNvbmZpZyJdLm5pY2ssIiIpLnJlcGxhY2UoIkJvd3NlcmluYXRvciIsIiIpLnJlcGxhY2UoIkFlZ2lzU2VydmVyIiwiIikucmVwbGFjZSgiICAiLCIgIikgLCAiLW9vb28iKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdDogZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGV4dHJhWyJjaGFubmVsIl0sICIgIi5qb2luKFt1c2Vyc1t4XVswXV0pLnJlcGxhY2UoZXh0cmFbImNvbmZpZyJdLm5pY2ssIiIpLnJlcGxhY2UoIkJvd3NlcmluYXRvciIsIiIpLnJlcGxhY2UoIkFlZ2lzU2VydmVyIiwiIikucmVwbGFjZSgiICAiLCIgIikgLCAiLW9vb28iKQ0KDQpkZWYga2lja0FsbChhcmdzPSIiLHVzZXI9Tm9uZSxob3N0bWFzaz1Ob25lLGV4dHJhPXt9KToNCiAgICB1c2VycyA9IGdldE5hbWVzQ2hhbm5lbChleHRyYVsiY2hhbm5lbCJdLGV4dHJhWyJpcmNzb2NrIl0uaXJjc29jaykNCiAgICBmb3IgaSBpbiB1c2VyczoNCiAgICAgICAgaWYgaVswXSAhPSAiQm93c2VyaW5hdG9yIiBhbmQgaVswXSAhPSAiQWVnaXNTZXJ2ZXIiIGFuZCBpWzBdICE9IGV4dHJhWyJjb25maWciXS5uaWNrOg0KICAgICAgICAgICAgZXh0cmFbImlyY3NvY2siXS5raWNrdXNlcihleHRyYVsiY2hhbm5lbCJdLGlbMF0sIllvdSBhcmUgYmVpbmcga2lja2VkIGFzIHBhcnQgb2Ygb3VyIGtpY2thbGwgY29tbWFuZC4iKQ0KICAgICAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICAgICAgDQpkZWYgbWFzc2hpZ2hsaWdodChhcmdzPSIiLHVzZXI9Tm9uZSxob3N0bWFzaz1Ob25lLGV4dHJhPXt9KToNCiAgICB1c2VycyA9IGdldE5hbWVzQ2hhbm5lbChleHRyYVsiY2hhbm5lbCJdLGV4dHJhWyJpcmNzb2NrIl0uaXJjc29jaykNCiAgICByZXR1cm5lZCA9ICIiDQogICAgZm9yIGkgaW4gdXNlcnM6DQogICAgICAgIHJldHVybmVkID0gcmV0dXJuZWQgKyBpWzBdICsgIiAiDQogICAgZXh0cmFbImlyY3NvY2siXS5zZW5kbXNnKGV4dHJhWyJjaGFubmVsIl0scmV0dXJuZWQpDQoNCmRlZiB0YWtlT3ZlcihhcmdzPSIiLHVzZXI9Tm9uZSxob3N0bWFzaz1Ob25lLGV4dHJhPXt9KToNCiAgICB1c2VycyA9IGdldE5hbWVzQ2hhbm5lbChleHRyYVsiY2hhbm5lbCJdLGV4dHJhWyJpcmNzb2NrIl0uaXJjc29jaykNCiAgICBjaGFubmVsID0gZXh0cmFbImNoYW5uZWwiXQ0KICAgIGV4dHJhWyJpcmNzb2NrIl0uam9pbmNoYW4oY2hhbm5lbCkNCiAgICBleHRyYVsiaXJjc29jayJdLnNlbmRtc2coIkNoYW5TZXJ2Iiwib3AgezB9Ii5mb3JtYXQoY2hhbm5lbCkpDQogICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsInVuYWZmaWxpYXRlZC9ib3dzZXJpbmF0b3IiLCIrZSIpDQogICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsIjIzNC4xMTIuMTk3LjEwNC5iYy5nb29nbGV1c2VyY29udGVudC5jb20iLCIrZSIpDQogICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsZXh0cmFbImNvbmZpZyJdLmlwLCIrZSIpDQogICAgZXh0cmFbImlyY3NvY2siXS5qb2luY2hhbihjaGFubmVsKQ0KICAgIGV4dHJhWyJpcmNzb2NrIl0uc2VuZG1zZygiQ2hhblNlcnYiLCJvcCB7MH0iLmZvcm1hdChjaGFubmVsKSkNCiAgIA0KICAgICNUT0RPIFNFTEYgT1AgV0hJTEUgVEFLRU9WRVINCiAgICAjSk9JTiBPTiBLSUNLIE9OIFRBS0VPVkVSDQogICAgZm9yIGkgaW4gdXNlcnM6DQogICAgICAgICNleHRyYVsiaXJjc29jayJdLmJhbihjaGFubmVsLCIqIikNCiAgICAgICAgaWYgaVswXSAhPSAiQm93c2VyaW5hdG9yIiBhbmQgaVswXSAhPSAiQWVnaXNTZXJ2ZXIiIGFuZCBpWzBdICE9IGV4dHJhWyJjb25maWciXS5uaWNrOiANCiAgICAgICAgICAgIGV4dHJhWyJpcmNzb2NrIl0uYmFuKGNoYW5uZWwsaVswXSkNCiAgICAgICAgICAgIGV4dHJhWyJpcmNzb2NrIl0ua2lja3VzZXIoY2hhbm5lbCxpWzBdLCJUYWtlb3ZlciBpbiBwcm9ncmVzcywgcGxlYXNlIHJlbWFpbiBjYWxtIikNCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICAgICAgaXJjbXNnID0gZXh0cmFbImlyY3NvY2siXS5pcmNzb2NrLnJlY3YoMjA0OCkuZGVjb2RlKCd1dGYtOCcsICdpZ25vcmUnKSAgIyByZWNlaXZlIGRhdGEgZnJvbSB0aGUgc2VydmVyDQogICAgICAgIGlyY21zZyA9IGlyY21zZy5zdHJpcCgnJykgDQogICAgICAgIGlmICIgS0lDSyAiIGluIGlyY21zZyBhbmQgZXh0cmFbImNvbmZpZyJdLm5pY2subG93ZXIoKSBpbiBpcmNtc2c6DQogICAgICAgICAgICBleHRyYVsiaXJjc29jayJdLmpvaW5jaGFuKGNoYW5uZWwpDQogICAgICAgICAgICBleHRyYVsiaXJjc29jayJdLnNlbmRtc2coIkNoYW5TZXJ2Iiwib3AgezB9Ii5mb3JtYXQoY2hhbm5lbCkpDQogICAgICAgIGVsaWYgIiBNT0RFICIgaW4gaXJjbXNnIGFuZCAiLW8iIGluIGlyY21zZzoNCiAgICAgICAgICAgIGV4dHJhWyJpcmNzb2NrIl0uc2VuZG1zZygiQ2hhblNlcnYiLCJvcCB7MH0iLmZvcm1hdChjaGFubmVsKSkNCiAgICAgICAgICAgIA0KICAgIGV4dHJhWyJpcmNzb2NrIl0uYmFuKGNoYW5uZWwsIiohKkAqJCMjYm93c2VyaW5hdG9yIikNCiAgICBmb3IgaSBpbiB1c2VyczoNCiAgICAgICAgaWYgaVswXSAhPSAiQm93c2VyaW5hdG9yIiBhbmQgaVswXSAhPSAiQWVnaXNTZXJ2ZXIiIGFuZCBpWzBdICE9IGV4dHJhWyJjb25maWciXS5uaWNrOiANCiAgICAgICAgICAgIGV4dHJhWyJpcmNzb2NrIl0uYmFuKGNoYW5uZWwsaVswXSkNCiAgICAgICAgICAgIA0KICAgIGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShjaGFubmVsLCIiLCIraSIpDQogICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsIiIsIitNIikNCiAgICBleHRyYVsiaXJjc29jayJdLnNldE1vZGUoY2hhbm5lbCwiIiwiK1MiKQ0KICAgIGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShjaGFubmVsLCBzdHIocmFuZG9tLnJhbmRpbnQoMCwxMDAwMDApKSAsIitrIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCmRlZiB1bnRha2VPdmVyKGFyZ3M9IiIsdXNlcj1Ob25lLGhvc3RtYXNrPU5vbmUsZXh0cmE9e30pOg0KICAgIGNoYW5uZWwgPSBleHRyYVsiY2hhbm5lbCJdDQogICAgZXh0cmFbImlyY3NvY2siXS51bmJhbihjaGFubmVsLCIqIikNCiAgICBleHRyYVsiaXJjc29jayJdLnNldE1vZGUoY2hhbm5lbCwiIiwiLWkiKQ0KICAgIGV4dHJhWyJpcmNzb2NrIl0uc2V0TW9kZShjaGFubmVsLCIiLCItTSIpDQogICAgZXh0cmFbImlyY3NvY2siXS5zZXRNb2RlKGNoYW5uZWwsIiIsIi1TIikNCiAgICBleHRyYVsiaXJjc29jayJdLnNldE1vZGUoY2hhbm5lbCwgIioiICwiLWsiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQpkZWYgc3BhbShhcmdzPSIiLHVzZXI9Tm9uZSxob3N0bWFzaz1Ob25lLGV4dHJhPXt9KToNCiAgICAjQHNwYW0gPGFtb3VudD4gPGRlbGF5PiA8bWVzc2FnZT4NCiAgICBhbW91bnQgPSBhcmdzLnNwbGl0KCIgIilbMF0NCiAgICBkZWxheSA9IGFyZ3Muc3BsaXQoIiAiKVsxXQ0KICAgIHRyeTogbWVzc2FnZSA9IGFyZ3Muc3BsaXQoYW1vdW50KyAiICIgKyBkZWxheSsiICIpWzFdDQogICAgZXhjZXB0OiBtZXNzYWdlID0gIlNQQU0iDQogICAgDQogICAgdHJ5OiANCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMCxpbnQoZmxvYXQoYW1vdW50KSkpOg0KICAgICAgICAgICAgdGltZS5zbGVlcChmbG9hdChkZWxheSkpDQogICAgICAgICAgICBleHRyYVsiaXJjc29jayJdLnNlbmRtc2coZXh0cmFbImNoYW5uZWwiXSxtZXNzYWdlKQ0KICAgICAgICByZXR1cm4gIkRvbmUgc3BhbW1pbmcgZm9yIHRoZSBkYXkuIg0KICAgIGV4Y2VwdDoNCiAgICAgICAgcmV0dXJuICJJbnZhbGlkIGFyZ3VtZW50cywgdXNlIHNwYW0gPGFtb3VudD4gPGRlbGF5PiA8bWVzc2FnZT4iDQoNCnRha2VPdmVyID0gdW50YWtlT3Zlcg=="""

import base64
import sys, StringIO, contextlib

@contextlib.contextmanager
def stdoutIO(stdout=None):
    old = sys.stdout
    if stdout is None:
        stdout = StringIO.StringIO()
    sys.stdout = stdout
    yield stdout
    sys.stdout = old
    
with stdoutIO() as s:
    exec base64.b64decode(data)
    print s.getvalue()
